<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" href="/favicon.ico" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="theme-color" content="#000000" />
        <meta name="description" content="Website for Squealer social media managers" />
        <link rel="apple-touch-icon" href="/logo192.png" />
        <link rel="manifest" href="/manifest.json" />
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"
            integrity="sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"
            integrity="sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous"
        />
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"
            defer
        ></script>
        <link href="/moddash/sidebar.css" rel="stylesheet" />
        <script
            src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js"
            integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE"
            crossorigin="anonymous"
            defer
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"
            integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha"
            crossorigin="anonymous"
            defer
        ></script>
        <script src="/moddash/dashboard.js" defer></script>
        <script src="/moddash/sidebar.js" defer></script>
        <script src="/moddash/user.js" defer></script>

        <title>Social media manager</title>
    </head>

    <body>
        <!-- User Page -->
        <script id="users-page-template" type="text/x-handlebars-template">
            {{#if loading}}
            <div class="d-flex justify-content-center mt-6">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
            {{/if}}
            {{#if error}}
                <div class="alert alert-danger" role="alert">
                    {{error}}
                </div>
            {{/if}}

            {{#if users}}
                <input type="text" id="search-user"  placeholder="Search User" class="form-control m-2"/>
                <div class="container" style="display:flex;flex-wrap:wrap; gap:1rem;align-content:center;">


                    {{#each users}}
                        {{> user-card}}
                    {{/each}}
                </div>
            {{/if}}
        </script>
        <script id="user-card-template" type="text/x-handlebars-template">
            <div class='card text-center' style='width: 18rem;'>

                <div class='card-body'>
                    <img src='{{profile_pic}}' alt='' width='64' height='64' class='rounded-circle me-2' />
                    <strong>{{name}}</strong>
                    <br />
                    {{#if suspended}}
                        <span class='badge bg-danger'>Disabled</span>
                    {{/if}}
                    <span class='badge bg-primary'>{{role}}</span>

                    <br />

                    <button type='button' onclick="suspendUser('{{name}}',{{suspended}})" class='btn btn-primary'>
                        Troggle Disable
                    </button>

                </div>
            </div>
        </script>

        <!-- sidebar user conponent -->
        <script id="user-sidebar-template" type="text/x-handlebars-template">
            <div class='pb-3'>
                <hr />
                <div class='dropdown px-3'>
                    <a
                        href='#'
                        class='d-flex align-items-center link-dark text-decoration-none dropdown-toggle'
                        id='dropdownUser2'
                        data-bs-toggle='dropdown'
                        aria-expanded='false'
                    >
                        <img src='{{img}}' alt='' width='32' height='32' class='rounded-circle me-2' />
                        <strong>{{name}}</strong>
                    </a>
                    <ul class='dropdown-menu text-small shadow' aria-labelledby='User Action'>
                        <li><a class='dropdown-item' href='/user/{{name}}'> Me</a></li>
                        <li><a class='dropdown-item' href='/logout'> Logout</a></li>
                    </ul>
                </div>
            </div>
        </script>

        <!-- sidebar component -->
        <header class="navbar sticky-top bg-light flex-md-nowrap d-md-none d-flex justify-content-between p-0 shadow">
            <a href="/" class="navbar-brand align-items-center d-flex ms-3 link-dark text-decoration-none">
                <svg aria-hidden="true" focusable="false" class="bi me-2" width="40" height="32">
                    <use href="#bootstrap" />
                </svg>
                <span class="fs-4 navbar-brand" title="Squealer Social Media Manager">Squealer SMM</span>
            </a>
            <!-- TODO: quando ho lo schermo largo dovrei mettere i tags corretti per accessibilitÃ , credo aria hidden -->
            <button
                class="navbar-toggler navbar-dark collapsed bg-dark me-1 my-2 d-md-none"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#sidebarMenu"
                aria-controls="sidebarMenu"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
        </header>

        <div class="container-fluid">
            <div class="row">
                <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse pt-md-0 pt-5">
                    <div class="position-sticky d-flex flex-column justify-content-between h-md-100">
                        <div class="pt-3">
                            <a href="/" class="align-items-center d-md-flex d-none mb-3 link-dark text-decoration-none">
                                <span class="fs-4 p-3" title="Squealer Social Media Manager">Squealer SMM</span>
                            </a>
                            <hr class="d-none d-md-block" />
                            <ul class="nav flex-column mb-auto">
                                <li>
                                    <a href="#" class="nav-link active" aria-current="Manage User"> Manage User </a>
                                </li>
                                <li>
                                    <a href="#" class="nav-link active" aria-current="Manage User"> Manage User </a>
                                </li>
                            </ul>
                        </div>
                        <div id="user-sidebar"></div>
                    </div>
                </nav>
                <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                    <div id="main-content" class="mt-2"></div>
                </main>
            </div>
        </div>
    </body>
</html>
